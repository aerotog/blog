<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[The best laid schemes]]></title><description><![CDATA[Musings on the often odd world of professional software engineering.]]></description><link>https://aerotog.github.io/blog</link><generator>GatsbyJS</generator><lastBuildDate>Mon, 12 Oct 2020 23:06:00 GMT</lastBuildDate><item><title><![CDATA[Just Embedded Things]]></title><description><![CDATA[I recently started listening to the podcast Embedded.fm. It’s hosted by Elecia and Christopher White where they discuss a wide range of…]]></description><link>https://aerotog.github.io/blog/embedded-1/</link><guid isPermaLink="false">https://aerotog.github.io/blog/embedded-1/</guid><pubDate>Mon, 12 Oct 2020 22:26:05 GMT</pubDate><content:encoded>&lt;p&gt;I recently started listening to the podcast &lt;a href=&quot;https://embedded.fm/&quot;&gt;Embedded.fm&lt;/a&gt;. It’s hosted by Elecia and Christopher White where they discuss a wide range of software engineering topics with different guests. Usually these topics are focused more on the embedded side of things, hence the name.&lt;/p&gt;
&lt;p&gt;Around the same time, my 3D printer broken due to a shorted power connector for the heat bed. I found a solution online and ended up ordering a replacement terminal on &lt;a href=&quot;https://www.digikey.com/&quot;&gt;Digi-Key&lt;/a&gt;. While I was searching for the right parts, I noticed how easy it was to find things on both Digi-Key and Amazon that many years ago I would have gone to Radio Shack with a 50/50 shot of actually finding.&lt;/p&gt;
&lt;p&gt;Intrigued, I dug through my closet and found my old Arduino. Several years back, I had purchased it along with a strip of addressable LEDs for a costume project that didn’t pan out. But having recently listened to interviews with different &lt;a href=&quot;https://en.wikipedia.org/wiki/Maker_culture&quot;&gt;makers&lt;/a&gt; from Embedded.fm, I was inspired to brush off the webs and hook it up.&lt;/p&gt;
&lt;p&gt;While admiring the brightly flashing LEDs along with how easy they were control thanks to the &lt;a href=&quot;http://fastled.io/&quot;&gt;FastLED&lt;/a&gt; library. I started looking online to see what was new in the world of the embedded system hobby. What I found was quite surprising, to say the least.&lt;/p&gt;
&lt;p&gt;Since I last looked at hobby embedded projects several years back, there seems to be a drastic increase in variety and availability of hardware along with a substantial drop in prices. (Thanks to the wild west of Chinese clones) On Amazon I found some WiFi enabled boards using the ESP8266 chip for less than $5 each which sounded like a steal.&lt;/p&gt;
&lt;p&gt;A few short days later, I had a web server running on a microcontroller that could control LEDs. This was a Eureka moment for me. I had given up developing on the Arduino in part because it was so difficult to control/interface with. But with WiFi and the ability of the board to act as either a web server or a web client, the possibilities have grown drastically.&lt;/p&gt;
&lt;p&gt;I spent the next several days scouring the internet for parts and ended up ordering large number of components from Amazon and AliExpress. My current plants include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;WiFi enabled binary wall clock and weather indicator&lt;/li&gt;
&lt;li&gt;WiFi controlled Christmas tree lights&lt;/li&gt;
&lt;li&gt;WiFi controlled car ground effect and interior floor lighting&lt;/li&gt;
&lt;li&gt;Custom TV ambient light system using Raspberry Pi 3&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The first three will all run off an ESP8266 chip while the last will use a Raspberry Pi 3 since I already had some of the required hardware lying around.&lt;/p&gt;
&lt;p&gt;And of course in the age of cloud computing and single page apps, this wouldn’t be complete without one: Autodesk offers a free online Arduino simulator called &lt;a href=&quot;https://www.tinkercad.com/&quot;&gt;Tinkercad&lt;/a&gt;. This web app lets you design and test circuits as well as Arduino code in either block or text form. I found this immensely useful for testing various code ideas since flashing the development boards takes much longer. (Which also helps prolong the microcontroller’s life since the EEPROM/flash memory writes are limited)&lt;/p&gt;
&lt;p&gt;I’ve started a &lt;a href=&quot;https://github.com/aerotog/embedded&quot;&gt;new Github repo&lt;/a&gt; where I’ll store my various Arduino sketches. I hope to have some if not all of these projects completed by year end. At the very least, this will be a good way to brush up on my C/C++. Depending on how they turn out, I’ll probably make a separate blog post for each project with pictures.&lt;/p&gt;
&lt;p&gt;~EOF~&lt;/p&gt;</content:encoded></item><item><title><![CDATA[A REST API by any other name]]></title><description><![CDATA[Introduction: What is REST? HATEOAS Rest without HATEOAS is not REST What is REST minus HATEOAS? What’s next?Introduction: What is REST…]]></description><link>https://aerotog.github.io/blog/rest/</link><guid isPermaLink="false">https://aerotog.github.io/blog/rest/</guid><pubDate>Thu, 10 Sep 2020 00:58:42 GMT</pubDate><content:encoded>&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#introduction-what-is-rest&quot;&gt;Introduction: What is REST?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#hateoas&quot;&gt;HATEOAS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#rest-without-hateoas-is-not-rest&quot;&gt;Rest without HATEOAS is not REST&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#what-is-rest-minus-hateoas&quot;&gt;What is REST minus HATEOAS?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#whats-next&quot;&gt;What’s next?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;introduction-what-is-rest&quot;&gt;Introduction: What is REST?&lt;/h2&gt;
&lt;p&gt;There’s a fundamental misunderstanding that is endemic in the software industry. Before continuing, please take a moment to answer this question:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;What defines a REST API?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Do you have an answer in mind? You most likely know it’s an HTTP based web API. Maybe you know the acronym stands for “Representational State Transfer” and with that you know that data is communicated between the client and server in the form of “representations”. Perhaps you included the very useful semantic use of HTTP verbs (getting data with HTTP GET vs. writing data with HTTP POST).&lt;/p&gt;
&lt;p&gt;Quite often people incorrectly associate REST with JSON since the vast majority of REST API use JSON, but this is definitely not a prerequisite.&lt;/p&gt;
&lt;p&gt;And just as often, many people forget, or intentionally omit, the final piece that the REST inventor claims is &lt;em&gt;fundamental to REST&lt;/em&gt;. This missing piece has the difficult to pronounce acronym “HATEOAS” (“hay-dee-us”? “hate-oh-es”?) which stands for “Hypermedia as the Engine of Application State”.&lt;/p&gt;
&lt;p&gt;Several years back, when I was first exposed to REST, I squarely in the former camp. I implemented my “REST” API as an HTTP API using JSON and meaningful HTTP verbs. It was relatively simple to understand and simple to use. Then one day a coworker introduced the concept of HATEOAS and it was like the ground had dropped beneath my feet. Suddenly my simple pure data types had &lt;em&gt;links&lt;/em&gt; in them and what was worse is that I was being forced to make my client &lt;em&gt;discover&lt;/em&gt; server endpoints by following these links! &lt;/p&gt;
&lt;p&gt;What do you meant I can’t use my hand crafted URLs? I knew how to construct the URLs by hand, why couldn’t I let my program do the same?? If the client must discover the endpoint, does this mean the client must start at the root path and make N calls every time it needed to make a new action against the API?! Nothing made sense anymore!&lt;/p&gt;
&lt;p&gt;Confounded, I set out to understand why my life had suddenly become 10x more complicated.&lt;/p&gt;
&lt;h2 id=&quot;hateoas&quot;&gt;HATEOAS&lt;/h2&gt;
&lt;p&gt;After a brief search, I found a few articles that helped provide context for HATEOAS and &lt;a href=&quot;https://martinfowler.com/articles/richardsonMaturityModel.html&quot;&gt;one in particular by Martin Fowler&lt;/a&gt; introduced me to the &lt;a href=&quot;https://www.crummy.com/writing/speaking/2008-QCon/act3.html&quot;&gt;Richardson Maturity Model (RMM) as originally presented by Leonard Richardson&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The RMM is an easy to understand tiered list types of API and how they relate to parts of REST. It categorizes API by levels of maturity in terms of REST, each building on top of the previous:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Level 0: Single URI, single HTTP method&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;This is the traditional XML-RPC and SOAP service design. Not often seen in new API today&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Level 1: Many URIs, one HTTP method&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;I’ve not seen many examples of this but Richardson does reference a few&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Level 2: Many URIs, each supporting multiple HTTP methods&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;This is seems to be the industry standard for “REST”&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Level 3: Resources contain links that describe their capabilities and relationships&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The fabled HATEOAS that seems to be all too rare&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Richardson provides some examples from Netflix and Amazon that demonstrate what it’s like working with an API that’s missing the HATEOAS aspects. It definitely seems like a public API that is self-documented and discoverable via hyperlinks would be incredibly helpful as the consumer. That said, I have personal experience with just how complicated requiring these hyperlinks can be. I am hardly surprised that many in the industry stop at Level 2. It’s &lt;em&gt;so&lt;/em&gt; much easier to ignore Level 3 and push the workload onto the API consumers.&lt;/p&gt;
&lt;h2 id=&quot;rest-without-hateoas-is-not-rest&quot;&gt;Rest without HATEOAS is not REST&lt;/h2&gt;
&lt;p&gt;Roy Fielding is very clear in his opinion: &lt;a href=&quot;https://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven&quot;&gt;”… if the engine of application state (and hence the API) is not being driven by hypertext, then it cannot be RESTful and cannot be a REST API. Period.”&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I actually took some time to read over a few chapters from &lt;a href=&quot;https://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm&quot;&gt;Fielding’s original thesis&lt;/a&gt;. Fielding sticks to diagrams and architectural theory rather than presenting coded examples. Likely as this was an academic thesis, not a technical white paper/specification. Because of this, it doesn’t particularly help with how a REST API should be implemented. However, it does help define &lt;em&gt;why&lt;/em&gt; he feels so strongly about hypermedia driven API.&lt;/p&gt;
&lt;p&gt;Fielding draws strong parallels between his REST API idea and web pages. He wants computer readable API that can be browsed naturally like a human would browse a web page. If you were browsing a news site, you wouldn’t type an articles URL into the address bar each time you wanted to read a new article. You would browse to the root domain of the news site, then click on one of the many links (or links in a search result) and continue clicking on links as you browsed the page. Fielding’s idea of REST was to &lt;a href=&quot;https://www.ics.uci.edu/~fielding/pubs/dissertation/evaluation.htm#sec_6_1&quot;&gt;make API follow this pattern which had been tried and tested and had well established infrastructure support via the World Wide Web&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The name “Representational State Transfer” is intended to evoke an image of how a well-designed Web application behaves: a network of web pages (a virtual state-machine), where the user progresses through the application by selecting links (state transitions), resulting in the next page (representing the next state of the application) being transferred to the user and rendered for their use.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;what-is-rest-minus-hateoas&quot;&gt;What is REST minus HATEOAS?&lt;/h2&gt;
&lt;p&gt;Okay, so we know what REST is and isn’t, at least according to the creator and some other preeminent bloggers. But what about all these “RESTful” API that aren’t apparently REST? They are certainly API; often successful ones at that. But if we can’t call them REST, what can we call them?&lt;/p&gt;
&lt;p&gt;Here’s the crux of my current issue. Even without a name, I can easily recognize and categorize these API that are so widely adopted. They are usually “Level 2 REST API” according to the Richardson Maturity Model. But out of respect for Fielding, and for my own sanity in being precise when talking about API, I’ve tried to find a better name.&lt;/p&gt;
&lt;p&gt;I’ve seen some people just call them “HTTP API” or “URL API” since clients are expected to know/construct URLs to use. Most recently I’ve started referring to them as “Open API” since it’s catchy and many of these API have Open API documentation. In my current position, being able to differentiate between Open API and REST API has helped as I no longer feel forced to consider including HATEOAS or sticking to other REST fundamentals like having single resources per URL. (This may be an anti-pattern, but so far I’ve found accessing groups of resources on a single parameterized URL very liberating)&lt;/p&gt;
&lt;p&gt;I recently found a great article from &lt;a href=&quot;https://cloud.google.com/blog/products/api-management/understanding-grpc-openapi-and-rest-and-when-to-use-them&quot;&gt;Google Cloud&lt;/a&gt; that goes into more detail about contrasts REST API and Open API, as well as gRPC which seems to be Google’s chosen evolution in HTTP API.&lt;/p&gt;
&lt;h2 id=&quot;whats-next&quot;&gt;What’s next?&lt;/h2&gt;
&lt;p&gt;I’ve started a project called &lt;a href=&quot;https://github.com/aerotog/BattleOfTheApi&quot;&gt;Battle of the API&lt;/a&gt; where I’m implementing various types of HTTP API. I plan to use this as a simple comparison tool between various HTTP API implementations with similar functionality/models.&lt;/p&gt;
&lt;p&gt;The current implementations only include &lt;a href=&quot;http://spec.openapis.org/oas/v3.0.3&quot;&gt;Open API&lt;/a&gt;, with built in Swagger UI, and &lt;a href=&quot;https://jsonapi.org/&quot;&gt;JSON API&lt;/a&gt; which is a framework that uses model type attributes to auto generates links that results in something resembling HATEOAS. (I would argue it’s not “true” HATEOAS since it doesn’t provide links for actions, only relations)&lt;/p&gt;
&lt;p&gt;At work, I’ve started being more specific about the type of API I am implementing. I’ve stopped calling my API “REST” or “RESTful” if they don’t contain hypermedia. I’ve opted to use “Open API” instead as we make liberal use of Open API documentation.&lt;/p&gt;
&lt;p&gt;In the future, I hope to explore the use of gRPC and GraphQL as they have gained quite a following and provide more powerful options when designing API. It’s always good to have more tools in the toolbox. It’s a shame when you only have a hammer and some of your problems aren’t nails.&lt;/p&gt;
&lt;p&gt;~EOF~&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Book Review from the Archives: Clean Series]]></title><description><![CDATA[Introduction Clean Code: A Handbook of Agile Software Craftsmanship The Boy Scout rule Meaningful names Small functions/classes Bad comments…]]></description><link>https://aerotog.github.io/blog/book-review-clean/</link><guid isPermaLink="false">https://aerotog.github.io/blog/book-review-clean/</guid><pubDate>Tue, 08 Sep 2020 02:40:21 GMT</pubDate><content:encoded>&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#introduction&quot;&gt;Introduction&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#clean-code-a-handbook-of-agile-software-craftsmanship&quot;&gt;Clean Code: A Handbook of Agile Software Craftsmanship&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#the-boy-scout-rule&quot;&gt;The Boy Scout rule&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#meaningful-names&quot;&gt;Meaningful names&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#small-functionsclasses&quot;&gt;Small functions/classes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#bad-comments-are-worse-than-no-comments&quot;&gt;Bad comments are worse than no comments&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#the-clean-coder-a-code-of-conduct-for-professional-programmers&quot;&gt;The Clean Coder: A Code of Conduct for Professional Programmers&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#professionalism&quot;&gt;Professionalism&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#tdd-and-acceptance-tests&quot;&gt;TDD and Acceptance tests&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#estimation&quot;&gt;Estimation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#mentoring-and-convincing-people&quot;&gt;Mentoring and convincing people&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#clean-architecture-a-craftsmans-guide-to-software-structure-and-design&quot;&gt;Clean Architecture: A Craftsman’s Guide to Software Structure and Design&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#why-is-good-architecture-important&quot;&gt;Why is good architecture important?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#solid&quot;&gt;SOLID&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#low-coupling-high-cohesion&quot;&gt;Low coupling, high cohesion&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#details-should-not-influence-architecture&quot;&gt;“Details” should not influence architecture&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#hexagonal-architecture&quot;&gt;Hexagonal architecture&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;#conclusion&quot;&gt;Conclusion&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;introduction&quot;&gt;Introduction&lt;/h1&gt;
&lt;p&gt;While I am currently reading a few different books, there are a number of books I’ve already completed for which I’d like to record my thoughts. This post covers a series of books that share the same “Clean” prefix: &lt;em&gt;Clean Code&lt;/em&gt;, &lt;em&gt;Clean Coder&lt;/em&gt;, and &lt;em&gt;Clean Architecture&lt;/em&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I have a fondness for the &lt;em&gt;Clean&lt;/em&gt; series of books by Robert “Uncle Bob” Martin. &lt;em&gt;Clean Code&lt;/em&gt; was one of the first books on professional software development recommended to me and I found it to be full of helpful guidelines and code examples. It was very useful as someone new to the industry, especially with a non-computer science background. (My degree being in Aerospace)&lt;/p&gt;
&lt;p&gt;Since then, I’ve found a not uncommon negative sentiment for the book in the online community. The view seems to be that the book’s suggestions, when overused by developers who don’t know better, cause more problems than they solve. I’ve definitely seen cases where a developer tried to apply the rules with less than stellar results. But in general, I appreciate having a common basis of understanding/expectations from which more advanced design can grow.&lt;/p&gt;
&lt;p&gt;I see far fewer discussions about the newer books in the series, &lt;em&gt;Clean Coder&lt;/em&gt; and &lt;em&gt;Clean Architecture&lt;/em&gt;. Similar to &lt;em&gt;Code&lt;/em&gt;, I found them quick and easy introductions to a number of important topics. I would recommend all three of the books to newly minted professional developers.&lt;/p&gt;
&lt;p&gt;It’s been a while since I’ve read the first two. I could easily spend an multiple posts on each book, but for now I’ve summarized a few of my most memorable points from each.&lt;/p&gt;
&lt;h1 id=&quot;clean-code-a-handbook-of-agile-software-craftsmanship&quot;&gt;Clean Code: A Handbook of Agile Software Craftsmanship&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Clean Code&lt;/em&gt; focuses on the tactical aspects of coding. It presents some easy to follow guidelines on how to avoid common pitfalls of what are often unintended consequences of honest efforts. &lt;/p&gt;
&lt;p&gt;After describing and providing context to the theory, the latter part of the book presents concrete code examples of how the theory can be applied via refactoring. Very much a “show vs. tell” way of teaching which while slower to get through, I find it often more memorable.&lt;/p&gt;
&lt;h2 id=&quot;the-boy-scout-rule&quot;&gt;The Boy Scout rule&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Leave the code better than you found it.&lt;/strong&gt; Having been a Boy Scout, I’m quite familiar with this idea and it’s something I try to live by in other areas of life.&lt;/p&gt;
&lt;p&gt;This simple concept has some parallels to the broken window theory from &lt;em&gt;Pragmatic Programmer&lt;/em&gt;. Entropy will always increase. Without actively fighting against this, code will inevitably get worse with time.&lt;/p&gt;
&lt;p&gt;Like Martin suggests, I’ve found the easiest way to counter this is to proactively take small steps in improving code each time you touch it. Every time you are in a code base making changes, consider adding unit test coverage or refactoring code to make it easier to grok.&lt;/p&gt;
&lt;h2 id=&quot;meaningful-names&quot;&gt;Meaningful names&lt;/h2&gt;
&lt;p&gt;I’ve seen something as innocuous as decisions about naming devolve into a hour long discussion in my team. Like the book, I prefer names with meaning over one off abbreviations and acronyms. But I’ve seen this taken to the extreme with hundred plus character long method names which I think is an anti-pattern. Names should optimize the signal to noise. They should be as short as possible while also providing sufficient information to the reader in a given context.&lt;/p&gt;
&lt;p&gt;Going one step further, I try to follow the &lt;em&gt;Domain Driven Design&lt;/em&gt; paradigm of using the Domain defined language. This makes it easier to speak with business and domain specific teams as we use the same language for the same concepts.&lt;/p&gt;
&lt;h2 id=&quot;small-functionsclasses&quot;&gt;Small functions/classes&lt;/h2&gt;
&lt;p&gt;Somewhat surprisingly, there seems to be quite a lot of contention around this topic, but can we all agree god objects are bad? Martin does appear overly enthusiastic about single line functions, but on the spectrum of long vs. short modules, I’ll almost always prefer shorter. They are usually easier to understand, test, and refactor.&lt;/p&gt;
&lt;p&gt;That said, I recently read an &lt;a href=&quot;https://softwarebyscience.com/very-short-functions-are-a-code-smell-an-overview-of-the-science-on-function-length/&quot;&gt;article&lt;/a&gt; that showed evidence that longer functions actually result in fewer defects per line of code. I don’t know if this is an artifact of the code being long or a direct result of the logic pathing being simpler to follow, but it’s something to consider.&lt;/p&gt;
&lt;p&gt;I feel the most important thing is keeping code logically grouped. If this means making your function run a bit long, it’s probably okay.&lt;/p&gt;
&lt;h2 id=&quot;bad-comments-are-worse-than-no-comments&quot;&gt;Bad comments are worse than no comments&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;Code&lt;/em&gt; emphasizes self documenting code. The first team I worked with went so far as to say every in line comment was a code smell. This is one of those rules that I think will get you in trouble if you follow it too closely. What might make perfect sense while being written will often become confusing mazes to the your future self or another team member less knowledgeable with the problem space. Ideally, the purpose of code should be self evident based on how its written, but this lofty goal can’t always be satisfied. &lt;/p&gt;
&lt;p&gt;As a general rule, if I’m ever being clever, I add a comment. If I am calling functions that are either obscure or misleading, I consider adding a comment. But I do prefer wrapping these calls in helper functions like Martin suggests.&lt;/p&gt;
&lt;p&gt;One of my biggest notes from the book that has matched my personal experience is &lt;strong&gt;comments lie&lt;/strong&gt;. Just like documentation, it’s all too easy for comments to be forgotten and not updated while the code is actively changing. This is one of the main drivers for self documenting code. Code may be harder to read and sometimes misleading, but it doesn’t lie.&lt;/p&gt;
&lt;h1 id=&quot;the-clean-coder-a-code-of-conduct-for-professional-programmers&quot;&gt;The Clean Coder: A Code of Conduct for Professional Programmers&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Clean Coder&lt;/em&gt; takes a step back from the technical aspects of engineering and focuses more on the soft skills. Without the low level technical details of the other books, this was a very easy read and I appreciated how it broadened the scope of an engineering job by considering a developers work in the context of the rest of the company: how a developer’s efforts impact, and is impacted by, other positions and needs.&lt;/p&gt;
&lt;h2 id=&quot;professionalism&quot;&gt;Professionalism&lt;/h2&gt;
&lt;p&gt;The books starts out on a very broad topic: professionalism. It sets the tone for the rest of the book as the later chapters often pose their theories in the context of what being a professional means. This theme leads into a multitude of very important topics including: understanding business needs, communicating across and outside the team, generating quality work.&lt;/p&gt;
&lt;p&gt;I think professionalism is one of those qualities that can benefit everyone by simply being mindful of it. In the ever evolving and relatively young industry of software engineering, it’s all too easy to fall prey to the siren call of the casual office space. This risks losing sight of what it means to be a professional. While keeping a casual work environment is not a bad thing, it can be difficult to balance that with acting like a professional. This book serves as a good reminder of the benefits of professionalism. Like in most things, balance is important.&lt;/p&gt;
&lt;h2 id=&quot;tdd-and-acceptance-tests&quot;&gt;TDD and Acceptance tests&lt;/h2&gt;
&lt;p&gt;I’ve been fortunate in that my teams, managers, and product managers have historically been supportive of the theory of Test Driven Development (TDD), even if they did not pursue/practice it on a daily basis. This has led to decent test coverage. I cannot say the same for acceptance tests.&lt;/p&gt;
&lt;p&gt;I once worked with a team that ran “acceptance tests” against their product. (I include quotes as I don’t think I would qualify the tests as such given my current understanding) For these tests, the team used a tool that was at the time two years past its end of life. It was a nightmare to maintain and the tests were incredibly flakey. The tests would often take 5 or more runs to get every assertion to pass, each an hour long, and the assertions rarely all passed in a single run so the artifact often had to be manually promoted in the end.&lt;/p&gt;
&lt;p&gt;The product in question was being sunset, so the team decided not to invest the time and effort in improving the situation. Seeing the problems with these tests, the team moved away from acceptance testing altogether and instead opted for automated integration tests.&lt;/p&gt;
&lt;p&gt;After reading &lt;em&gt;Clean Coder&lt;/em&gt; I now think this was a mistake. At the time, I didn’t understand the purpose of acceptance tests and considered them little more than a nuisance. Now the purpose of acceptance tests makes much more sense. &lt;/p&gt;
&lt;p&gt;Acceptance tests, as they have specifications written in plain English, allow the product owner and QA teams to contribute test cases. As opposed to writing white paper specifications for a product, they can write test cases, that once passed, should mean the development team has successfully met the original requirements. &lt;strong&gt;Acceptance tests allow for TDD at the product/team level.&lt;/strong&gt; Without these types of tests, it’s much harder for effective communication of requirement between product and dev and harder to prove the satisfaction of those same requirements.&lt;/p&gt;
&lt;h2 id=&quot;estimation&quot;&gt;Estimation&lt;/h2&gt;
&lt;p&gt;As a scrum master, estimation is of utmost importance. I’ve seen what happens when estimates turn out to be accurate, and I’ve seen what happens when they are off by a wide margin. More often than not, it’s the latter case.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Coder&lt;/em&gt; focuses on how estimates are viewed differently by developers vs. clients/business teams. While developers often view estimates as a guess, what the other party often wants are commitments. Unfortunately, it’s often impossible to make a commitment when first starting a project because their are too many unknown variables.&lt;/p&gt;
&lt;p&gt;The book tries to emphasize as a professional, the developer should avoid making commitments before they are confident they can meet them. This would be nice, but it unfortunately seems a bit naive. I’ve seen time and time again where developers are asked to provide estimates for work that will take an unknown amount of effort which are immediately turned into commitments to the rest of the organization.&lt;/p&gt;
&lt;p&gt;Personally, I’ve started focusing on &lt;strong&gt;projections&lt;/strong&gt; instead of estimates. I have a blog post in mind that would go into further detail. In short, by establishing a team’s velocity and a fully estimated backlog of work, it becomes possible to project when the work will be completed. This seems obvious, but the catch is neither of these things can be known &lt;strong&gt;until the project has already started&lt;/strong&gt;. And quite often, this is too late in the mind of management.&lt;/p&gt;
&lt;h2 id=&quot;mentoring-and-convincing-people&quot;&gt;Mentoring and convincing people&lt;/h2&gt;
&lt;p&gt;As I’ve gained seniority in my current position, being able to mentor and convince others has become increasingly more important. I feel like I do a decent job introducing and communicating concepts to members on my team but I’m still trying to improve my ability to influence the direction of projects.&lt;/p&gt;
&lt;p&gt;Previously I mentioned how I now advocate for acceptance testing with product and QA being actively involved with their creation. I’ve not yet been able to convince the wider organization this is how we should be operating.&lt;/p&gt;
&lt;p&gt;I originally tried to communicate the idea and convince the team to plan the work necessary. This did not succeed as we were focused on feature development. Now I’m trying to follow the book’s advice and instead show rather than tell. &lt;strong&gt;Actions (and results) speak louder than words.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;My new plan is to incorporate the new testing strategy into our new service/feature development. This will allow us to see if it actually improves our development pipeline without interfering too much with timelines. This is more difficult to manage as we’ll have competing concerns from the broader scope of the project, but I think it’s worth pursuing.&lt;/p&gt;
&lt;h1 id=&quot;clean-architecture-a-craftsmans-guide-to-software-structure-and-design&quot;&gt;Clean Architecture: A Craftsman’s Guide to Software Structure and Design&lt;/h1&gt;
&lt;p&gt;&lt;em&gt;Clean Architecture&lt;/em&gt; dives back into the technical aspects of the job but mostly avoids code example and instead favors diagrams, the most common tool of the architect and what the book aptly describes as “drawing lines between boxes”.&lt;/p&gt;
&lt;p&gt;With its diagrams, it steadfastly argues for its Clean Architecture approach to system design. This mainly focuses on well defined boundaries between loosely coupled components and delaying decisions on what it calls “details” as long as possible, if not indefinitely.&lt;/p&gt;
&lt;h2 id=&quot;why-is-good-architecture-important&quot;&gt;Why is good architecture important?&lt;/h2&gt;
&lt;p&gt;Before describing what makes good architecture, the book provides examples of &lt;em&gt;why&lt;/em&gt; good architecture is important. The gist is that code maintenance, including bug fixes and feature adds, far outweighs initial implementation in cost. While I had heard this before, I never really understood how/why that was true. The book makes a very salient point.&lt;/p&gt;
&lt;p&gt;Quite often, product owners are a source of what they view as reasonable, similarly sized feature requests. But from the developers point of view, each subsequent feature is a puzzle piece that must be added to an every growing and ever more complex puzzle. Each individual piece may be similar in size, but it is inherently more difficult for each new piece.&lt;/p&gt;
&lt;p&gt;The goal of good architecture is to make adding new puzzle pieces to the system easier. This minimizes cost of maintenance and delays the somewhat inevitable tipping point where costs outweigh the value of new feature additions.&lt;/p&gt;
&lt;p&gt;Good architecture can be difficult to carry out since it quite often results in larger up front costs in terms of development time. Ultimately the architect must try to achieve sufficiently good architecture that will meet the future business needs without blowing up the project’s budget and timeline.&lt;/p&gt;
&lt;h2 id=&quot;solid&quot;&gt;SOLID&lt;/h2&gt;
&lt;p&gt;If you spend any amount of time exploring popular software design best practices, you will inevitably stumble upon the &lt;a href=&quot;https://en.wikipedia.org/wiki/SOLID&quot;&gt;SOLID acronym&lt;/a&gt;. As Martin’s design philosophy is the origin of the SOLID principles, it’s no surprise he often promotes the acronym in his books.&lt;/p&gt;
&lt;p&gt;I didn’t learn about SOLID from &lt;em&gt;Clean Architecture&lt;/em&gt; but the book does spend a separate chapter for each letter’s namesake and provides some useful context to the theory behind the concepts.&lt;/p&gt;
&lt;h2 id=&quot;low-coupling-high-cohesion&quot;&gt;Low coupling, high cohesion&lt;/h2&gt;
&lt;p&gt;One of the trickiest things to balance as a software architect is coupling vs. cohesion. The two ideals are often at odds.&lt;/p&gt;
&lt;p&gt;You can maximize cohesion by having a single “god class” but then suffer the consequences of highly coupled code. Alternatively, you can have tiny single purpose modules to maximally decouple things but suffer the consequence of hunting and navigating a complex file structure with very little cohesion.&lt;/p&gt;
&lt;p&gt;Neither of these extremes are desireable. Instead a good architect should seek balance between the two. Knowing when to trade one for the other can be very difficult.&lt;/p&gt;
&lt;h2 id=&quot;details-should-not-influence-architecture&quot;&gt;“Details” should not influence architecture&lt;/h2&gt;
&lt;p&gt;The book separates code into two categories:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Policies&lt;/li&gt;
&lt;li&gt;Details&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It defines Policies as the business rules and procedures of the system whereas the Details are everything else that allows the outside world interact with the Policies. These Details include: IO devices, databases, web systems, etc. etc.&lt;/p&gt;
&lt;p&gt;While I easily understand and agree with the premise that the external interactions should be decoupled and independent of the underlying business rules, the book goes so far as to say that the Details &lt;em&gt;don’t matter&lt;/em&gt; and that decisions about them should be delayed until the last possible moment.&lt;/p&gt;
&lt;p&gt;I get that delaying decisions allow designers the most time to gather information, but I question the practicality of this argument. Yes, sometimes the Details in question are eventually deemed unnecessary and by delaying their implementation can avoid unnecessary work. But quite often there are fundamental design/performance requirements that require these Details. Or alternatively, the existence or lack of a certain feature directly informs how much work the business rules will need to perform.&lt;/p&gt;
&lt;p&gt;I do agree that the ideal design is one that codes against interface behind which the Details can be swapped at will, but I’ve found that quite often this forces the designer to make grave concessions by accounting for differences in the underlying Detail implementations. The concessions are not free and intentionally obfuscating these Details as “unimportant” seems questionable. But it is something I will keep in mind moving forward.&lt;/p&gt;
&lt;h2 id=&quot;hexagonal-architecture&quot;&gt;Hexagonal architecture&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;aka Ports and Adapters&lt;/strong&gt;
The book briefly mentions this a few times but spends quite a bit of time talking about ideas that closely align with this type of architecture.&lt;/p&gt;
&lt;p&gt;I was already somewhat familiar with Hexagonal design as one of my coworkers tried introducing it a ways back. It did seem attractive in theory, but I never fully grasped how it could be implemented when I tried to apply it to our existing code base.&lt;/p&gt;
&lt;p&gt;The later chapters, especially chapter 34 “The Missing Chapter” which is written by Simon Brown provide some examples of how this type of architecture can be achieved.&lt;/p&gt;
&lt;p&gt;What I think was a key missing piece for my understanding was that &lt;strong&gt;implementations do not own their interfaces&lt;/strong&gt;. That vast majority of interfaces that I have seen have lived in the same namespace as their implementations. This seems to go hand in hand with the very common top down Layered Architecture which, while relatively easy to understand, has some fundamental traps like forcing the business layer to depend on the persistence/DB layer.&lt;/p&gt;
&lt;p&gt;By allowing the business/domain layer to control or own the interfaces it uses (including all IO and persistence interfaces) it makes the control flow much more intuitive. Instead of a top down control flow, the result is an “inside out” control flow.&lt;/p&gt;
&lt;p&gt;The diagrams describing the control flow has greatly helped me understand how Hexagonal architecture can be implemented and I hope to put it to use in the near future.&lt;/p&gt;
&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;
&lt;p&gt;What did we learn?&lt;/p&gt;
&lt;p&gt;That I should avoid writing blog posts that are this long/dense. Oh, sorry, you meant the books.&lt;/p&gt;
&lt;p&gt;What did we learn &lt;em&gt;about the books&lt;/em&gt;?&lt;/p&gt;
&lt;p&gt;In the &lt;em&gt;Clean&lt;/em&gt; series of books, Robert Martin does a great job introducing a broad range of fundamental topics to fresh eyes. He may not go into much detail for each topic, but the material being easy to read makes it possible to get through all the material without getting fatigued.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Clean Code&lt;/em&gt; presents a variety of code examples on how to avoid common pitfalls for new developers. Some of these ideas can be abused so they must be thoughtfully applied rather than followed dogmatically.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Clean Coder&lt;/em&gt; does a good job focusing on the soft skills a professional software engineer needs. It helps provided context and understanding for the needs outside the immediate surroundings of the &lt;del&gt;lowly code monkey&lt;/del&gt;, ahem, I mean software engineer.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Clean Architecture&lt;/em&gt; provides a several methods of arriving at good system and code architecture. Some of these methods seem much easier to understand/quantify and implement than others.&lt;/p&gt;
&lt;p&gt;Overall, I will continue to recommend all three books to new developers. Experienced devs may already know much of what the books have to say, but even so I think the books could serve as a quick, concise reminder for how to recognize and pursue best practices both in terms of code and in terms of human interactions.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Result: 3x Recommended&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;~EOF~&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Adding comments to a Gatsby static blog]]></title><description><![CDATA[Wouldn’t it be nice to allow the community to interact with my blog? Surely it can’t be that difficult! I bet I can get it done in an…]]></description><link>https://aerotog.github.io/blog/comments-in-gatsby/</link><guid isPermaLink="false">https://aerotog.github.io/blog/comments-in-gatsby/</guid><pubDate>Sun, 30 Aug 2020 01:43:33 GMT</pubDate><content:encoded>&lt;p&gt;Wouldn’t it be nice to allow the community to interact with my blog? Surely it can’t be that difficult! I bet I can get it done in an afternoon.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Six hours later…&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Well that took longer than I expected.&lt;/p&gt;
&lt;p&gt;The comment section should now appear if the user click the “Load comments” hyperlink or if they directly browse to a blog post. Users can authenticate using Github OAuth. Comments are saved in issues on my blog project so no storage other than Github is needed. A bit of a hacky solution, but I love the clever repurposing of Github’s features.&lt;/p&gt;
&lt;p&gt;So how did I get here?&lt;/p&gt;
&lt;p&gt;I first considerd my options. I wanted to stick to a “serverless” solution, so hosting my open comment API would be my last resort. Of course I’ll continue to use static site generation via Gatsby.&lt;/p&gt;
&lt;p&gt;The possible solutions I considered included:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://staticman.net/&quot;&gt;Staticman&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;This seems like a comprehensive solution. It enables user generated content on a static site by pushing content to the site’s Github repository by way of Statisman’s private API. I do like the concept, but I feel having commits for every comment is a bit troublesome.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/gitalk/gitalk&quot;&gt;Gitalk&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;It’s a React component that uses your personal Github OAuth application token to post comments as issues to a repo you own. I love the concept of using Github issues as comment threads. However, it has two deal breakers:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;It requires the “window” browser global. Unfortunately, since Gatsby uses Server Side Rendering, both the “window” and “document” globals are unavailable. Gatsby does provide a workaround for this, but in short it is “ensure the code doesn’t run unless it’s rendered in the browser”. So the code we want to run won’t work.&lt;/li&gt;
&lt;li&gt;Also, for Gitalk to work, &lt;em&gt;you must provide your Github OAuth Client Secret to the user’s client&lt;/em&gt;. This could easily be abused by 3rd parties, so it’s probably best not to do this.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/utterance/utterances&quot;&gt;Utterances&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Like Gitalk, Utterances uses Github issues to store comments. The primary difference is it has its own Github app that hosts the API used for posting comments so you don’t need to provide your own OAuth key. The configuration is very simple and as long as your repo allows public issues, it seems the easiest to implement with the fewest risks.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;After trying to use Gitalk and realizing 1) it won’t work with SSR and 2) it requires a secret I don’t want to reveal, I quickly moved on to Utterances.&lt;/p&gt;
&lt;p&gt;Utterances is simple to implement. It walks you through configuration and &lt;a href=&quot;https://utteranc.es/&quot;&gt;generates an HTML script block&lt;/a&gt; you can plug into your web page.&lt;/p&gt;
&lt;p&gt;With the smell of victory in the air, I added it to my blog template:
&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;			&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;footer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
				&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Bio&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
			&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;footer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
			&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;https://utteranc.es/client.js&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
				&lt;span class=&quot;token attr-name&quot;&gt;repo&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;aerotog/blog&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
				&lt;span class=&quot;token attr-name&quot;&gt;issue-term&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;title&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
				&lt;span class=&quot;token attr-name&quot;&gt;theme&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;github-light&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
				&lt;span class=&quot;token attr-name&quot;&gt;crossorigin&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;anonymous&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script&quot;&gt;&lt;span class=&quot;token language-javascript&quot;&gt;
			&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; 
		&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;        
	&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;article&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It didn’t work.&lt;/p&gt;
&lt;p&gt;A quick google search later, I &lt;a href=&quot;https://dev.to/creativcoder/how-to-add-comment-support-on-your-gatsby-blog-using-github-utterances-423n&quot;&gt;found a most relevant blog post&lt;/a&gt;. This walkthrough uses the React “useEffect” hook to populate a “Comment” component consisting of a single “comments” class div. Pretty straight forward.&lt;/p&gt;
&lt;p&gt;After some quick modifications and serving the site with “gatsby develop”, I had working comments! Or so I thought.&lt;/p&gt;
&lt;p&gt;Yes, they worked with “gatsby develop”. But as soon as I ran “gatsby build” and tried accessing my static site, the comment element did not appear.&lt;/p&gt;
&lt;p&gt;After a bit more research, I found the problem. Because Gatsby uses Server Side Rendering for its static site generation, client side triggers like componentDidMount() and hooks like useEffect() &lt;a href=&quot;https://blog.logrocket.com/fixing-gatsbys-rehydration-issue/&quot;&gt;&lt;em&gt;do not run&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I took a moment to re-evaluate what I’ve tried. The useEffect() solution was not compatible with my page generation strategy. But I never fully investigated why adding the JS to the blog template didn’t work.&lt;/p&gt;
&lt;p&gt;My understanding of React component templating lead me to believe I could add HTML blocks at will, like the script block I wanted. To better deduce why it wasn’t working, I replaced the JS with a simple console statement. But even a simple &lt;code class=&quot;language-text&quot;&gt;console.log(&amp;quot;Hello world&amp;quot;)&lt;/code&gt; was failing to execute.&lt;/p&gt;
&lt;p&gt;Pursuing methods for adding script blocks to React components lead me to suggestions for Gatsby which included creating a &lt;code class=&quot;language-text&quot;&gt;gatsby-ssr.js&lt;/code&gt; file or modifying the &lt;code class=&quot;language-text&quot;&gt;default-html.js&lt;/code&gt;. But eventually I found what I really wanted: &lt;a href=&quot;https://reactjs.org/docs/dom-elements.html#dangerouslysetinnerhtml&quot;&gt;dangerouslySetInnerHTML&lt;/a&gt;. This ominous method has pitfalls and risks with rendering unsanitized HTML in your page (you shouldn’t use it without considering the risks) but &lt;em&gt;this&lt;/em&gt; is how you can render HTML at will:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;html&quot;&gt;&lt;pre class=&quot;language-html&quot;&gt;&lt;code class=&quot;language-html&quot;&gt;      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;section&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;comments&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;a&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;href&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Load comments&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;dangerouslySetInnerHTML&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;{{&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;__html:&lt;/span&gt;&lt;/span&gt; 
          &lt;span class=&quot;token attr-name&quot;&gt;`&amp;lt;script&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;https://utteranc.es/client.js&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token attr-name&quot;&gt;repo&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;aerotog/blog&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token attr-name&quot;&gt;issue-term&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;title&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token attr-name&quot;&gt;theme&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;github-light&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token attr-name&quot;&gt;crossorigin&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;anonymous&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script&quot;&gt;&lt;span class=&quot;token language-javascript&quot;&gt;
          &lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;`
        }} /&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Dangerous HTML in hand, I once again had working comments. This time in my static site!&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/blog/static/606dc23fc719c3bdb095c11eedd6726d/c7dcc/first.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 85.13513513513513%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB2UlEQVQ4y61UPY/UMBDNT6VCoqOgo4CK/wAIUV0BHRINEicQBQ0IitPpYA+tFvZQllzW+XRsx04eM5PN3nLaQ+HDq6fxjL0z45mXiVKloPIC1loYY2CaBrXW0ARLut7sG7IzzMY26gzW2c4runP3Hu4/eAil1pjP51gul/g8m+F0doovhBkhSRKoLEOeZ8hIKk6CwPssG/ZFUQwOvy1jrFUGRxnWdSWRmk3EMbupq+97RFMvToFk2HUduq7/b063GXrv4dpW5GWM0a8KhF2HgTL0oaP6aRRlRV3j2nGnG7Hxnl8x/G//M3dXdPvmdTw5eATbAWdJjpWq8UPpLc5zg9L0+2F7rNY10sIiTisU2iF68fwZPp2cwPoeeUmcMn6L2rQi+ewqaOvRuCB3bRsuasgkbp3Dvy2q4ds3hzg+PgJXw7Ve0PoguKzvg5y3g/SBMrx14xqeHjwGlVDYXtYNkjQTqY2bjJpgnUfEXeUut0QPa51Ak431EDqJGibAb7DDwyAO+JBp8id1G39MwWjLqb/8Sn65R19cNBrLqhYiG2NlfBkZZxYNdb/b42h8xSL/ipeLVzhcvMZZ8f3CocxAmm2WqMOTZpBW5uTvHMbVCu/iD3gff8S5TvETPKQp0HdymxMAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;First!&quot;
        title=&quot;First!&quot;
        src=&quot;/blog/static/606dc23fc719c3bdb095c11eedd6726d/fcda8/first.png&quot;
        srcset=&quot;/blog/static/606dc23fc719c3bdb095c11eedd6726d/12f09/first.png 148w,
/blog/static/606dc23fc719c3bdb095c11eedd6726d/e4a3f/first.png 295w,
/blog/static/606dc23fc719c3bdb095c11eedd6726d/fcda8/first.png 590w,
/blog/static/606dc23fc719c3bdb095c11eedd6726d/c7dcc/first.png 641w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;There was one final problem. The comments would only load when I directly browsed to a blog post or refreshed the page. If I was navigating the site using its links, the blog post content would change, but the comments would never load.&lt;/p&gt;
&lt;p&gt;After some thinking, I realized this was caused by the fundamental nature of React apps. One of the &lt;em&gt;key features&lt;/em&gt; of React is that it can dynamically change content on a page without reloading/navigating away. This makes React apps incredibly responsive, but it has the side effect of breaking my comments!&lt;/p&gt;
&lt;p&gt;I considered ways around this. I thought about force reloading the page, but I didn’t like taking control away from the user. Especially for people like me who don’t often read comments, sacrificing usability for an unused/unwanted feature was not appealing.&lt;/p&gt;
&lt;p&gt;So I gave control to the user. As seen at the bottom of the page, I added a “Load comments” link that refreshes the page which in turn makes the comments render. It’s not ideal, but I think it’s an acceptable compromise. If someone is really wanting to read/write comments, hopefully a single click isn’t enough to deter them.&lt;/p&gt;
&lt;p&gt;Long live the comments! I’m sure this feature will endure the tests of time! Or at least until the &lt;a href=&quot;https://utteranc.es/&quot;&gt;Utterances&lt;/a&gt; API is shut down.&lt;/p&gt;
&lt;p&gt;~EOF~&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Hello World]]></title><description><![CDATA[Two of the best things about writing software are: Being able to flex your creativity Not having to flex your creativity The “Hello World…]]></description><link>https://aerotog.github.io/blog/hello-world/</link><guid isPermaLink="false">https://aerotog.github.io/blog/hello-world/</guid><pubDate>Fri, 28 Aug 2020 03:27:34 GMT</pubDate><content:encoded>&lt;p&gt;Two of the best things about writing software are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Being able to flex your creativity&lt;/li&gt;
&lt;li&gt;Not having to flex your creativity&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The “Hello World” process is so ingrained in the software world. It’s easy to be stricken by decision paralysis in the modern age with its vast sea of options. Sometimes it’s nice being able to shut off your frontal cortex and go with the obvious.&lt;/p&gt;
&lt;p&gt;The template for this blog even had a Hello World entry, so who am I to challenge tradition!&lt;/p&gt;
&lt;p&gt;This blog is a static site built using &lt;a href=&quot;https://www.gatsbyjs.com/&quot;&gt;GatsbyJS&lt;/a&gt;. So far it hasn’t been too painful to work with, but for a static blog, it does seem a bit much. It uses React components which are relatively straight forward (if you know React), but it populates data at build time from a &lt;em&gt;GraphQL API&lt;/em&gt;. &lt;/p&gt;
&lt;p&gt;For people used to working in the frontend, maybe this is par for the course. But from my backend background, it seems a little crazy that you need an entire API just to share data across your source code’s components.&lt;/p&gt;
&lt;p&gt;Oh, don’t forget the 1,643 &lt;del&gt;npm&lt;/del&gt; yarn packages sitting at 405MB on disk. Did I mention this is a static website meant to host a blog? Yes? Okay.&lt;/p&gt;
&lt;p&gt;C’est la vie.&lt;/p&gt;
&lt;p&gt;I have been wanting more experience with frontend frameworks so this will work out, I think.&lt;/p&gt;
&lt;p&gt;I plan on hosting this blog like my other static pages using &lt;a href=&quot;https://pages.github.com/&quot;&gt;Github Pages&lt;/a&gt; which is really convenient since I already host my personal repos there. I’m editing this in &lt;a href=&quot;https://code.visualstudio.com/&quot;&gt;VS Code&lt;/a&gt;. (With vim mode, of course!) As much as I love Jetbrains’s IDEs, what Microsoft and the VS Code community has done with Atom is rather inspiring.&lt;/p&gt;
&lt;p&gt;Perhaps in the future I’ll try something more ambitious. Like a &lt;a href=&quot;https://jamstack.org/&quot;&gt;JAMstack&lt;/a&gt; page hosted on &lt;a href=&quot;https://www.netlify.com/&quot;&gt;Netlify&lt;/a&gt;. I really like the concept of static sites being hosted “serverless” infrastructure hitting API in the backend when needed.&lt;/p&gt;
&lt;p&gt;~EOF~&lt;/p&gt;</content:encoded></item></channel></rss>